<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Sample</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="./assets/thirdparty/CETEI/js/CETEI.js"></script>
    <script>


        var CETEIcean = new CETEI()

        function init() {
            var map = L.map('mapcontainer', { zoomControl: false });

            var mpoint = [35.8627, 139.6072];
            map.setView(mpoint, 8);

            L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
                attribution: "<a href='https://maps.gsi.go.jp/development/ichiran.html' target='_blank'>地理院タイル</a>"
            }).addTo(map);

            $.getJSON("config.json", function (data) {
                var urls = data

                for (var i = 0; i < urls.length; i++) {
                    var url = urls[i]

                    CETEIcean.getHTML5(url, function (data) {
                        var roadlatlons = []

                        var correspactions = $(data).find("tei-correspaction")
                        for (var j = 0; j < correspactions.length; j++) {
                            var correspaction = correspactions[j]
                            var geo = $(correspaction).find("tei-geo")[0]
                            var latlng = $(geo).text().split(" ")
                            roadlatlons.push([Number(latlng[0]), Number(latlng[1])])
                        }

                        //polylineオブジェクトを作成して地図に追加
                        L.polyline(roadlatlons, { color: 'blue', weight: 1 * 5 }).addTo(map);
                    })


                }
            })
        }
    </script>
</head>

<body onload="init()">
    <div id="mapcontainer" style="position:absolute;top:0;left:0;right:0;bottom:0;"></div>
</body>

</html>